@{
    ViewData["Title"] = "Dashboard";
}

<div class="admin-dashboard py-5">
    <div class="container">
        <!-- Dashboard header -->
        <div class="dashboard-header mb-5" data-aos="fade-up">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h1 class="display-5 fw-bold text-gradient mb-3">
                        <i class="fas fa-tachometer-alt me-2"></i> Trang quản trị
                    </h1>
                    <p class="lead text-muted">Theo dõi và quản lý toàn bộ hoạt động của nền tảng học trực tuyến</p>
                </div>
                <div class="col-lg-4 text-lg-end">
                    <div class="dashboard-date">
                        <div class="current-date fs-5 fw-bold text-primary">
                            <i class="far fa-calendar-alt me-2"></i> 
                            <span id="currentDate"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Cards -->
        <div class="row g-4 mb-5" data-aos="fade-up" data-aos-delay="100">
            <div class="col-md-3">
                <div class="stat-card bg-gradient-primary text-white h-100 rounded-4 shadow-sm position-relative overflow-hidden">
                    <div class="stat-icon position-absolute opacity-15">
                        <i class="fas fa-users fa-5x"></i>
                    </div>
                    <div class="card-body position-relative">
                        <div class="d-flex flex-column h-100">
                            <h6 class="stat-label mb-3">Người dùng</h6>
                            <h2 class="stat-value display-6 fw-bold mb-3">@ViewBag.TotalUsers</h2>
                            <div class="stat-growth mt-auto">
                                <span class="badge bg-white text-primary"><i class="fas fa-arrow-up me-1"></i> 12%</span>
                                <span class="text-white-50 ms-2">so với tháng trước</span>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent border-0 pb-3">
                        <a asp-action="Users" class="text-white text-decoration-none d-flex align-items-center">
                            Xem chi tiết <i class="fas fa-arrow-right ms-2"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat-card bg-gradient-success text-white h-100 rounded-4 shadow-sm position-relative overflow-hidden">
                    <div class="stat-icon position-absolute opacity-15">
                        <i class="fas fa-book fa-5x"></i>
                    </div>
                    <div class="card-body position-relative">
                        <div class="d-flex flex-column h-100">
                            <h6 class="stat-label mb-3">Khóa học</h6>
                            <h2 class="stat-value display-6 fw-bold mb-3">@ViewBag.TotalCourses</h2>
                            <div class="stat-growth mt-auto">
                                <span class="badge bg-white text-success"><i class="fas fa-arrow-up me-1"></i> 8%</span>
                                <span class="text-white-50 ms-2">so với tháng trước</span>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent border-0 pb-3">
                        <a asp-controller="Course" asp-action="Index" class="text-white text-decoration-none d-flex align-items-center">
                            Xem chi tiết <i class="fas fa-arrow-right ms-2"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat-card bg-gradient-info text-white h-100 rounded-4 shadow-sm position-relative overflow-hidden">
                    <div class="stat-icon position-absolute opacity-15">
                        <i class="fas fa-tags fa-5x"></i>
                    </div>
                    <div class="card-body position-relative">
                        <div class="d-flex flex-column h-100">
                            <h6 class="stat-label mb-3">Danh mục</h6>
                            <h2 class="stat-value display-6 fw-bold mb-3">@ViewBag.TotalCategories</h2>
                            <div class="stat-growth mt-auto">
                                <span class="badge bg-white text-info"><i class="fas fa-equals me-1"></i> 0%</span>
                                <span class="text-white-50 ms-2">so với tháng trước</span>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent border-0 pb-3">
                        <a asp-action="Categories" class="text-white text-decoration-none d-flex align-items-center">
                            Xem chi tiết <i class="fas fa-arrow-right ms-2"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="stat-card bg-gradient-warning text-white h-100 rounded-4 shadow-sm position-relative overflow-hidden">
                    <div class="stat-icon position-absolute opacity-15">
                        <i class="fas fa-chalkboard-teacher fa-5x"></i>
                    </div>
                    <div class="card-body position-relative">
                        <div class="d-flex flex-column h-100">
                            <h6 class="stat-label mb-3">Giảng viên</h6>
                            <h2 class="stat-value display-6 fw-bold mb-3">@ViewBag.TotalInstructors</h2>
                            <div class="stat-growth mt-auto">
                                <span class="badge bg-white text-warning"><i class="fas fa-arrow-up me-1"></i> 5%</span>
                                <span class="text-white-50 ms-2">so với tháng trước</span>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent border-0 pb-3">
                        <a asp-action="Users" class="text-white text-decoration-none d-flex align-items-center">
                            Xem chi tiết <i class="fas fa-arrow-right ms-2"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row g-4 mb-5">
            <!-- Performance chart -->
            <div class="col-lg-8" data-aos="fade-up" data-aos-delay="150">
                <div class="card shadow-sm h-100 border-0 rounded-4">
                    <div class="card-header bg-transparent pt-4 pb-3 border-0">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="card-title m-0">
                                <i class="fas fa-chart-line text-primary me-2"></i>
                                Biểu đồ hoạt động
                            </h5>
                            <div class="dropdown">
                                <button class="btn btn-sm btn-light dropdown-toggle" type="button" id="timeRangeDropdown" data-bs-toggle="dropdown">
                                    Tuần này
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#">Tuần này</a></li>
                                    <li><a class="dropdown-item" href="#">Tháng này</a></li>
                                    <li><a class="dropdown-item" href="#">Quý này</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <canvas id="performanceChart" height="250"></canvas>
                    </div>
                </div>
            </div>

            <!-- Recent activities -->
            <div class="col-lg-4" data-aos="fade-up" data-aos-delay="200">
                <div class="card shadow-sm h-100 border-0 rounded-4">
                    <div class="card-header bg-transparent pt-4 pb-3 border-0">
                        <h5 class="card-title m-0">
                            <i class="fas fa-bell text-primary me-2"></i>
                            Hoạt động gần đây
                        </h5>
                    </div>
                    <div class="card-body p-0">
                        <ul class="list-group list-group-flush activity-list">
                            <li class="list-group-item border-0 py-3">
                                <div class="d-flex">
                                    <div class="activity-icon bg-primary-subtle text-primary me-3">
                                        <i class="fas fa-user-plus"></i>
                                    </div>
                                    <div class="activity-content">
                                        <div class="activity-title">Người dùng mới đăng ký</div>
                                        <div class="activity-text text-muted">Nguyễn Văn A đã tạo tài khoản</div>
                                        <small class="text-muted">15 phút trước</small>
                                    </div>
                                </div>
                            </li>
                            <li class="list-group-item border-0 py-3">
                                <div class="d-flex">
                                    <div class="activity-icon bg-success-subtle text-success me-3">
                                        <i class="fas fa-book"></i>
                                    </div>
                                    <div class="activity-content">
                                        <div class="activity-title">Khóa học mới được tạo</div>
                                        <div class="activity-text text-muted">Lập trình Python cơ bản</div>
                                        <small class="text-muted">1 giờ trước</small>
                                    </div>
                                </div>
                            </li>
                            <li class="list-group-item border-0 py-3">
                                <div class="d-flex">
                                    <div class="activity-icon bg-warning-subtle text-warning me-3">
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <div class="activity-content">
                                        <div class="activity-title">Đánh giá mới</div>
                                        <div class="activity-text text-muted">Trần B đánh giá khóa học 5 sao</div>
                                        <small class="text-muted">3 giờ trước</small>
                                    </div>
                                </div>
                            </li>
                            <li class="list-group-item border-0 py-3">
                                <div class="d-flex">
                                    <div class="activity-icon bg-info-subtle text-info me-3">
                                        <i class="fas fa-graduation-cap"></i>
                                    </div>
                                    <div class="activity-content">
                                        <div class="activity-title">Bài học hoàn thành</div>
                                        <div class="activity-text text-muted">5 người đã hoàn thành "HTML cơ bản"</div>
                                        <small class="text-muted">5 giờ trước</small>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="card-footer bg-transparent border-0 text-center pb-4">
                        <a href="#" class="btn btn-light btn-sm">
                            Xem tất cả <i class="fas fa-arrow-right ms-1"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-access mb-4" data-aos="fade-up" data-aos-delay="200">
            <h4 class="section-title mb-4">
                <i class="fas fa-bolt me-2 text-warning"></i>
                Truy cập nhanh
            </h4>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="quick-card border-0 rounded-4 bg-light h-100">
                        <div class="card-body d-flex flex-column align-items-start">
                            <div class="quick-icon mb-3 bg-primary-subtle text-primary rounded-3 p-3">
                                <i class="fas fa-users fa-2x"></i>
                            </div>
                            <h5 class="card-title">Quản lý người dùng</h5>
                            <p class="card-text text-muted">Quản lý tài khoản người dùng, phân quyền và xem hoạt động.</p>
                            <a asp-action="Users" class="btn btn-outline-primary mt-auto">
                                Truy cập <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="quick-card border-0 rounded-4 bg-light h-100">
                        <div class="card-body d-flex flex-column align-items-start">
                            <div class="quick-icon mb-3 bg-success-subtle text-success rounded-3 p-3">
                                <i class="fas fa-tags fa-2x"></i>
                            </div>
                            <h5 class="card-title">Quản lý danh mục</h5>
                            <p class="card-text text-muted">Tổ chức và quản lý các danh mục khóa học.</p>
                            <a asp-action="Categories" class="btn btn-outline-success mt-auto">
                                Truy cập <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="quick-card border-0 rounded-4 bg-light h-100">
                        <div class="card-body d-flex flex-column align-items-start">
                            <div class="quick-icon mb-3 bg-info-subtle text-info rounded-3 p-3">
                                <i class="fas fa-book fa-2x"></i>
                            </div>
                            <h5 class="card-title">Quản lý khóa học</h5>
                            <p class="card-text text-muted">Xem, duyệt và quản lý các khóa học trên hệ thống.</p>
                            <a asp-controller="Course" asp-action="ManageCourses" class="btn btn-outline-info mt-auto">
                                Truy cập <i class="fas fa-arrow-right ms-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Set current date
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('currentDate').innerText = new Date().toLocaleDateString('vi-VN', options);
        
        // Performance chart
        const ctx = document.getElementById('performanceChart').getContext('2d');
        
        // Chart data
        const labels = ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'];
        const usersData = [5, 8, 12, 7, 10, 15, 9];
        const coursesData = [3, 4, 2, 5, 3, 7, 4];
        
        const performanceChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [
                    {
                        label: 'Người dùng mới',
                        data: usersData,
                        borderColor: '#4361ee',
                        backgroundColor: 'rgba(67, 97, 238, 0.1)',
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: 'Khóa học đăng ký',
                        data: coursesData,
                        borderColor: '#f72585',
                        backgroundColor: 'rgba(247, 37, 133, 0.1)',
                        tension: 0.4,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            display: true,
                            drawBorder: false
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });
    </script>
}
